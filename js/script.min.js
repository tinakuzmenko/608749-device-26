var formButton=document.querySelector(".contacts-button"),formModal=document.querySelector(".form-modal"),formCloseButton=formModal.querySelector(".form-modal-close"),messageForm=formModal.querySelector("form"),formName=formModal.querySelector("[name=user-name]"),formEmail=formModal.querySelector("[name=user-mail]"),formUserMessage=formModal.querySelector("textarea"),mapButton=document.querySelector(".contacts-map"),mapModal=document.querySelector(".map-modal"),mapCloseButton=mapModal.querySelector(".form-modal-close"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("user-name"),storageEmail=localStorage.getItem("user-email")}catch(o){isStorageSupport=!1}formButton.addEventListener("click",function(o){o.preventDefault(),formModal.classList.add("modal-show"),storageName||storageEmail?(storageName&&(formName.value=storageName,formEmail.focus()),storageEmail&&(formEmail.value=storageEmail,formUserMessage.focus())):formName.focus()}),formCloseButton.addEventListener("click",function(o){o.preventDefault(),formModal.classList.remove("modal-show"),formModal.classList.remove("modal-error")}),messageForm.addEventListener("submit",function(o){formName.value&&formEmail.value?isStorageSupport&&(localStorage.setItem("user-name",formName.value),localStorage.setItem("user-email",formEmail.value)):(o.preventDefault(),formModal.classList.remove("modal-error"),formModal.offsetWidth=formModal.offsetWidth,formModal.classList.add("modal-error"))}),window.addEventListener("keydown",function(o){27===o.keyCode&&(o.preventDefault(),formModal.classList.contains("modal-show")&&(formModal.classList.remove("modal-show"),formModal.classList.contains("modal-error")&&formModal.classList.remove("modal-error")),mapModal.classList.contains("modal-show")&&mapModal.classList.remove("modal-show"))}),mapButton.addEventListener("click",function(o){o.preventDefault(),mapModal.classList.add("modal-show")}),mapCloseButton.addEventListener("click",function(o){o.preventDefault(),mapModal.classList.remove("modal-show")});